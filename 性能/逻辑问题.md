   ğŸ”´ ä¸¥é‡é€»è¾‘é”™è¯¯

   1. å†…å­˜æ³„æ¼ - Toastç´¯ç§¯ (main.js:356-389) âš ï¸âš ï¸âš ï¸

     function showToast(message) {
       const toast = document.createElement('div')
       // ... åˆ›å»ºå¹¶æ·»åŠ åˆ°DOM
       setTimeout(() => {
         document.body.removeChild(toast)  // âŒ å¯èƒ½å¤±è´¥
       }, 2300)
     }

   é—®é¢˜ï¼š

     - å¦‚æœç”¨æˆ·å¿«é€Ÿè§¦å‘å¤šä¸ªæ“ä½œï¼ˆå¦‚è¿ç»­ä¿å­˜ï¼‰ï¼Œå¤šä¸ªtoaståŒæ—¶å­˜åœ¨
     - removeChild å¯èƒ½åœ¨å…ƒç´ å·²è¢«ç§»é™¤æ—¶æŠ›å‡ºå¼‚å¸¸
     - setTimeoutå¼•ç”¨å¯èƒ½åœ¨é¡µé¢å¸è½½æ—¶æœªæ¸…ç†

   ä¿®å¤ï¼š

     function showToast(message) {
       const toast = document.createElement('div')
       // ...
       setTimeout(() => {
         if (toast.parentNode) {  // âœ… æ£€æŸ¥å­˜åœ¨æ€§
           toast.parentNode.removeChild(toast)
         }
       }, 2300)
     }

   -------------------------------------------------------------------------------

   2. äº‹ä»¶ç›‘å¬å™¨æ³„æ¼ (main.js:322-335) âš ï¸âš ï¸âš ï¸

     resizer.addEventListener('mousedown', (event) => {
       // ...
       document.addEventListener('mousemove', handleMouseMove)
       document.addEventListener('mouseup', stopResizing)
       window.addEventListener('blur', stopResizing)
     })

   é—®é¢˜ï¼š

     - æ¯æ¬¡mousedownéƒ½æ·»åŠ æ–°çš„ç›‘å¬å™¨ï¼Œä½†ä»æœªç§»é™¤æ—§çš„
     - å¦‚æœç”¨æˆ·å¿«é€Ÿç‚¹å‡»æ‹–æ‹½ï¼Œä¼šç´¯ç§¯å¤§é‡ç›‘å¬å™¨
     - handleMouseMove åœ¨æ¯æ¬¡æ‹–æ‹½æ—¶éƒ½æ˜¯æ–°å‡½æ•°ï¼Œæ— æ³•æ­£ç¡®ç§»é™¤

   æ€§èƒ½å½±å“ï¼š

     - 200æ¬¡æ‹–æ‹½ = 600ä¸ªäº‹ä»¶ç›‘å¬å™¨
     - æ¯æ¬¡mousemoveè§¦å‘200+æ¬¡å›è°ƒ

   ä¿®å¤ï¼šéœ€è¦å°†ç›‘å¬å™¨å­˜å‚¨å¹¶åœ¨æ·»åŠ å‰ç§»é™¤æ—§çš„

   -------------------------------------------------------------------------------

   3. MutationObserver æ°¸ä¸æ–­å¼€ (main.js:338-346) âš ï¸âš ï¸

     const observer = new MutationObserver((mutationsList) => {
       // ...
     })
     observer.observe(editorElement, { childList: true, subtree: true })
     // âŒ æ°¸è¿œä¸ä¼šè°ƒç”¨ observer.disconnect()

   é—®é¢˜ï¼š

     - åœ¨é¡µé¢æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æŒç»­ç›‘å¬æ‰€æœ‰DOMå˜åŒ–
     - subtree: true ç›‘å¬æ‰€æœ‰å­å…ƒç´ ï¼Œæ€§èƒ½å¼€é”€å¤§
     - æ²¡æœ‰æ¸…ç†æœºåˆ¶

   æ€§èƒ½å½±å“ï¼š

     - ç¼–è¾‘å™¨æ¯æ¬¡DOMå˜åŒ–éƒ½è§¦å‘å›è°ƒ
     - é•¿æ—¶é—´ä½¿ç”¨ä¼šç´¯ç§¯å¤§é‡mutationè®°å½•

   -------------------------------------------------------------------------------

   4. ç«æ€æ¡ä»¶ - vditorå…¨å±€å˜é‡ (main.js:62,396-430) âš ï¸âš ï¸

     let vditor = null  // å…¨å±€å˜é‡

     function setupElectronHandlers() {
       window.electronAPI.onNewFile(() => {
         if (vditor) {  // âŒ å¯èƒ½åœ¨åˆå§‹åŒ–å®Œæˆå‰è¢«è°ƒç”¨
           vditor.setValue('')
         }
       })
     }

     document.addEventListener('DOMContentLoaded', () => {
       initEditor()  // å¼‚æ­¥åˆå§‹åŒ–
       setupElectronHandlers()  // ç«‹å³æ³¨å†Œ
     })

   é—®é¢˜ï¼š

     - Vditoråˆå§‹åŒ–æ˜¯å¼‚æ­¥çš„ï¼ˆline 204 after å›è°ƒï¼‰
     - ä½†ç«‹å³æ³¨å†Œäº†äº‹ä»¶ç›‘å¬å™¨
     - å¦‚æœç”¨æˆ·åœ¨åˆå§‹åŒ–å®Œæˆå‰æŒ‰Ctrl+Nï¼Œä¼šé™é»˜å¤±è´¥

   -------------------------------------------------------------------------------

   5. æ–‡ä»¶ä¸Šä¼ å¹¶å‘å¤„ç†é”™è¯¯ (main.js:78-147) âš ï¸âš ï¸âš ï¸

     fileArray.forEach((file) => {
       // ...
       reader.onload = () => {
         vditor.insertValue(`![${altText}](${result})\n`)  // âŒ å¹¶å‘æ’å…¥
         successCount += 1
       }
     })

   ä¸¥é‡é—®é¢˜ï¼š

     - å¤šä¸ªå›¾ç‰‡åŒæ—¶è°ƒç”¨ insertValueï¼Œæ²¡æœ‰é¡ºåºä¿è¯
     - successCount åœ¨å¤šä¸ªå¼‚æ­¥å›è°ƒä¸­ä¿®æ”¹ï¼ˆéåŸå­æ“ä½œï¼‰
     - å¦‚æœæ’å…¥10å¼ å›¾ç‰‡ï¼Œå¯èƒ½å‡ºç°ï¼š
       - å›¾ç‰‡é¡ºåºä¹±åº
       - å¤šä¸ªToaståŒæ—¶å¼¹å‡ºï¼ˆæ€§èƒ½é—®é¢˜1å åŠ ï¼‰

   -------------------------------------------------------------------------------

   6. ç¼ºå°‘é”™è¯¯å¤„ç†çš„IPCè°ƒç”¨ (main.js:414,425) âš ï¸

     const result = await window.electronAPI.saveFile(content)
     if (result.success) {  // âŒ æ²¡æœ‰å¤„ç†å¤±è´¥æƒ…å†µ
       showToast(`æ–‡ä»¶å·²ä¿å­˜`)
     }
     // å¦‚æœ result.success = false, ç”¨æˆ·ä¸çŸ¥é“å¤±è´¥äº†

   é—®é¢˜ï¼š

     - ä¿å­˜å¤±è´¥æ—¶ç”¨æˆ·æ— ä»»ä½•æç¤º
     - result.error è¢«å¿½ç•¥

   -------------------------------------------------------------------------------

   7. æ–‡ä»¶è·¯å¾„ç«æ€æ¡ä»¶ (electron/main.cjs:301-316) âš ï¸âš ï¸

     app.on('open-file', (_event, filePath) => {
       if (mainWindow === null) {
         createWindow()  // å¼‚æ­¥åˆ›å»ºçª—å£
       }
       setTimeout(async () => {  // âŒ å›ºå®šå»¶è¿Ÿä¸å¯é 
         const content = await fsPromises.readFile(filePath, 'utf8')
         sendToRenderer('menu:open-file', { filePath, content })
       }, 100)
     })

   é—®é¢˜ï¼š

     - 100msçš„å»¶è¿Ÿæ˜¯ä»»æ„çš„
     - çª—å£åˆ›å»ºå¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´
     - åœ¨æ…¢é€Ÿæœºå™¨ä¸Šä¼šå¯¼è‡´æ¶ˆæ¯å‘é€å¤±è´¥

   -------------------------------------------------------------------------------

   8. é¢„è§ˆæŒ‰é’®tooltipä¿®å¤é€»è¾‘ç¼ºé™· (main.js:253-258,261-272) âš ï¸

     toolbar.addEventListener('click', (e) => {
       const target = e.target.closest('.vditor-toolbar__item')
       if (isPreviewBtn(target)) {
         hideTooltip(target)
       }
     })
     // âŒ äº‹ä»¶ç›‘å¬å™¨æ°¸ä¸ç§»é™¤

   é—®é¢˜ï¼š

     - å¦‚æœVditoré‡æ–°æ¸²æŸ“toolbarï¼Œæ—§çš„ç›‘å¬å™¨ä»åœ¨
     - å¯èƒ½å¯¼è‡´å¤šä¸ªç›¸åŒç›‘å¬å™¨ç´¯ç§¯

   å¦ä¸€ä¸ªé—®é¢˜ï¼š

     disablePreviewTooltip()  // line 272
     // âŒ åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœtoolbaré‡æ–°æ¸²æŸ“ä¼šå¤±æ•ˆ

   -------------------------------------------------------------------------------

   âš¡ ä¸¥é‡æ€§èƒ½é—®é¢˜

   9. CSSé€‰æ‹©å™¨æ€§èƒ½ (style.css:162,181,193,199,204,208) âš ï¸âš ï¸

     .vditor-toolbar__item {
       transition: background-color 0.15s ease !important;  /* line 162 */
     }
     .vditor-toolbar {
       transition: none !important;  /* line 182 - è¦†ç›–ä¸Šé¢çš„è§„åˆ™ */
     }
     .vditor * {
       transition: none !important;  /* line 194 - å…¨å±€è¦†ç›– */
     }
     .vditor-toolbar__item {
       transition: none !important;  /* line 200 - é‡å¤å®šä¹‰ */
     }

   é—®é¢˜ï¼š

     - .vditor * é€šé…ç¬¦é€‰æ‹©å™¨æå…¶ä½æ•ˆ
     - æµè§ˆå™¨éœ€è¦æ£€æŸ¥vditorä¸‹çš„æ¯ä¸ªå…ƒç´ 
     - vditor-toolbar__item è¢«å®šä¹‰3æ¬¡ï¼Œå†²çªä¸”å†—ä½™
     - å¤§é‡ !important é™ä½CSSä¼˜å…ˆçº§è®¡ç®—æ•ˆç‡

   æ€§èƒ½å½±å“ï¼š

     - ç¼–è¾‘å™¨æ¯æ¬¡é‡ç»˜éƒ½è¦è®¡ç®—æ•°åƒæ¡è§„åˆ™
     - ä¼°è®¡é™ä½æ¸²æŸ“æ€§èƒ½30-50%

   -------------------------------------------------------------------------------

   10. å¤§æ–‡ä»¶Base64å†…è”é£é™© (main.js:81,145) âš ï¸âš ï¸âš ï¸

     const MAX_INLINE_IMAGE_SIZE = 5 * 1024 * 1024  // 5MB
     // ...
     reader.readAsDataURL(file)  // è½¬æ¢ä¸ºBase64
     vditor.insertValue(`![${altText}](${result})\n`)

   ä¸¥é‡é—®é¢˜ï¼š

     - Base64ç¼–ç ä¼šå¢åŠ 33%å¤§å°ï¼š5MB â†’ 6.65MB
     - å…¨éƒ¨å†…è”åˆ°Markdownæ–‡æ¡£ä¸­
     - æ’å…¥10å¼ 5MBå›¾ç‰‡ = 66.5MBçš„çº¯æ–‡æœ¬
     - ä¿å­˜æ–‡ä»¶æ—¶å†™å…¥66.5MBåˆ°ç£ç›˜
     - æ‰“å¼€æ–‡ä»¶æ—¶è¯»å–66.5MBåˆ°å†…å­˜

   æ€§èƒ½å½±å“ï¼š

     - Vditoréœ€è¦è§£æå’Œæ¸²æŸ“66.5MBçš„æ–‡æœ¬
     - å¯èƒ½å¯¼è‡´æµè§ˆå™¨å¡æ­»æˆ–å´©æºƒ
     - å»ºè®®ï¼šé™ä½åˆ°500KBæˆ–ä½¿ç”¨å¤–éƒ¨æ–‡ä»¶å¼•ç”¨

   -------------------------------------------------------------------------------

   11. æ–‡ä»¶è¯»å–æ— å¤§å°é™åˆ¶ (electron/main.cjs:148) âš ï¸âš ï¸

     const content = await fsPromises.readFile(filePath, 'utf8')
     // âŒ æ²¡æœ‰æ–‡ä»¶å¤§å°æ£€æŸ¥

   é—®é¢˜ï¼š

     - ç”¨æˆ·å¯ä»¥æ‰“å¼€1GBçš„Markdownæ–‡ä»¶
     - ä¼šä¸€æ¬¡æ€§è¯»å…¥å†…å­˜å¹¶å‘é€åˆ°æ¸²æŸ“è¿›ç¨‹
     - å¯èƒ½å¯¼è‡´åº”ç”¨å´©æºƒ

   -------------------------------------------------------------------------------

   12. vditor.resize()é¢‘ç¹è°ƒç”¨ (main.js:317-319) âš ï¸

     const handleMouseMove = (event) => {
       // ...
       outlineElement.style.width = `${newWidth}px`
       if (vditor) {
         vditor.resize()  // âŒ æ¯æ¬¡mousemoveéƒ½è°ƒç”¨
       }
     }

   æ€§èƒ½å½±å“ï¼š

     - æ‹–æ‹½æ—¶æ¯æ¯«ç§’è§¦å‘æ•°åæ¬¡
     - resize() å¯èƒ½è§¦å‘é‡æ’å’Œé‡ç»˜
     - å»ºè®®ï¼šä½¿ç”¨èŠ‚æµï¼ˆthrottleï¼‰é™åˆ¶åˆ°æ¯100msä¸€æ¬¡

   -------------------------------------------------------------------------------

   13. querySelectorAllåœ¨å¾ªç¯ä¸­ (main.js:262,341) âš ï¸

     const items = toolbar.querySelectorAll('.vditor-toolbar__item')  // éå†æ‰€æœ‰æŒ‰é’®
     items.forEach((el) => {
       if (!isPreviewBtn(el)) return
       // ...
     })

   é—®é¢˜ï¼š

     - æ¯æ¬¡è°ƒç”¨éƒ½é‡æ–°æŸ¥è¯¢DOM
     - åº”è¯¥ç¼“å­˜ç»“æœæˆ–ä½¿ç”¨äº‹ä»¶å§”æ‰˜

   -------------------------------------------------------------------------------

   ğŸ› å…¶ä»–é€»è¾‘é—®é¢˜

   14. IPCå¤„ç†å™¨é‡å¤æ³¨å†Œ (electron/main.cjs:238-281,286) âš ï¸

     app.whenReady().then(() => {
       createWindow()
       registerIpcHandlers()  // æ³¨å†Œä¸€æ¬¡

       app.on('activate', () => {
         if (mainWindow === null) {
           createWindow()
           // âŒ æ²¡æœ‰å†æ¬¡è°ƒç”¨ registerIpcHandlers()
         }
       })
     })

   é—®é¢˜ï¼š

     - ipcMain.handle åœ¨å…¨å±€æ³¨å†Œï¼Œä¸æ˜¯é’ˆå¯¹ç‰¹å®šçª—å£
     - ä½†çª—å£å…³é—­åï¼Œå¤„ç†å™¨ä»å¼•ç”¨æ—§çš„ currentFilePath
     - macOSä¸Šå…³é—­çª—å£å†æ¿€æ´»ä¼šå‡ºç°çŠ¶æ€ä¸ä¸€è‡´

   -------------------------------------------------------------------------------

   15. é”™è¯¯å¤„ç†ä¸¢å¤±å †æ ˆ (electron/main.cjs:254,271) âš ï¸

     } catch (error) {
       console.error('ä¿å­˜æ–‡ä»¶å¤±è´¥:', error)  // âŒ åªè®°å½•
       return { success: false, error: error.message }  // ä¸¢å¤±å †æ ˆ
     }

   é—®é¢˜ï¼š

     - error.message ä¸åŒ…å«å †æ ˆä¿¡æ¯
     - ç”Ÿäº§ç¯å¢ƒè°ƒè¯•å›°éš¾
     - å»ºè®®ï¼šè¿”å› error.stack æˆ–ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿ

   -------------------------------------------------------------------------------

   16. æœªå¤„ç†çš„Promiseæ‹’ç» (main.js:411-429) âš ï¸

     window.electronAPI.onSaveFile(async () => {
       if (vditor) {
         const result = await window.electronAPI.saveFile(content)
         // âŒ æ²¡æœ‰ try-catch
       }
     })

   é—®é¢˜ï¼š

     - IPCé€šä¿¡å¤±è´¥ä¼šå¯¼è‡´æœªæ•è·çš„Promiseæ‹’ç»
     - åº”è¯¥æ·»åŠ try-catch

   -------------------------------------------------------------------------------

   17. çª—å£æ ‡é¢˜æ›´æ–°æ—¶æœºé”™è¯¯ (electron/main.cjs:112) âš ï¸

     function createWindow() {
       // ... åˆ›å»ºçª—å£
       updateWindowTitle()  // âŒ æ­¤æ—¶ currentFilePath å¯èƒ½å·²è¿‡æ—¶
     }

   é—®é¢˜ï¼š

     - macOSä¸Šä»Docké‡æ–°æ‰“å¼€æ—¶ï¼Œæ ‡é¢˜æ˜¾ç¤ºä¸Šæ¬¡çš„æ–‡ä»¶å
     - åº”è¯¥åœ¨æ¯æ¬¡æ˜¾ç¤ºçª—å£æ—¶æ›´æ–°

